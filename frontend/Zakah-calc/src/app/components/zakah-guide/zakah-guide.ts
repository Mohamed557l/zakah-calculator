import { Component, computed, signal } from '@angular/core';
import { GuideSection } from '../../models/GuideSection';


@Component({
  selector: 'app-zakah-guide',
  imports: [],
  templateUrl: './zakah-guide.html',
  styleUrl: './zakah-guide.css',
})
export class ZakahGuide {
 readonly guideSections = signal<GuideSection[]>([
    {
      id: 'what-is-zakah',
      title: 'ما هي الزكاة؟',
      content: 'الزكاة في الإسلام هي عبادة مالية فرضها الله على المسلمين، وهي الركن الثالث من أركان الإسلام بعد الشهادتين والصلاة، وليست صدقة تطوعية يختارها الإنسان من نفسه. وهي مقدار محدد من المال يُخرج من مال المسلم إذا بلغ مالُه نصابًا معيّنًا وحال عليه الحول، ثم يُعطى للفقراء والمحتاجين وبقية الأصناف التي ذكرها الله في القرآن الكريم في مصارف الزكاة الثمانية.\n' +
        '\n' +
        '\n' +
        'معنى الزكاة لغة وشرعًا\n' +
        'في اللغة: كلمة الزكاة تعني النماء والزيادة والطهارة، أي أن المال يزداد ويطهر بإخراج جزء منه في سبيل الله.\n' +
        '\n' +
        '\n' +
        'في الشرع: هي حصة مقدَّرة من مالٍ مخصوص تُجب على المسلم وتُصرف في جهات محددة، مثل الفقراء والمساكين وغيرهم ممن حددهم الشرع.\n' +
        '\n' +
        '\n' +
        'منزلة الزكاة في الإسلام\n' +
        'الزكاة هي الركن الثالث من أركان الإسلام الخمسة، فلا يتم كمال إسلام العبد إلا بأدائها لمن وجبت عليه.\n' +
        '\n' +
        '\n' +
        'ثبتت فرضيتها بالقرآن والسنة وإجماع العلماء، وتركها مع القدرة عليها من أعظم الذنوب لما فيها من حق الله وحق العباد.\n' +
        '\n' +
        '\n' +
        'على من تجب الزكاة؟\n' +
        'تجب الزكاة على المسلم الحر الذي يملك مالًا حلالًا بلغ النصاب، ومرَّ عليه عام قمري كامل، وكان زائدًا عن حاجته الأصلية من مأكل ومشرب ومسكن ونحوها.\n' +
        '\n' +
        '\n' +
        'لا تجب الزكاة في المال الحرام، ولا على من لا يملك ملكًا تامًّا للمال، ولا على الفقير الذي لا يملك النصاب أصلًا.\n' +
        '\n' +
        '\n' +
        'أنواع الأموال التي تُزكَّى\n' +
        'من أهم ما تجب فيه الزكاة: النقود (المال)، والذهب والفضة، وعروض التجارة، والزروع والثمار، وبعض أنواع الأنعام كالأنعام السائمة.\n' +
        '\n' +
        '\n' +
        'كذلك توجد زكاة الفطر، وهي زكاة خاصة بالفطر من رمضان تُخرج عن الشخص نفسه وأهل بيته، وتختلف عن زكاة المال في سببها ومقدارها.\n' +
        '\n' +
        '\n' +
        'حكمة الزكاة وآثارها\n' +
        'الزكاة تطهّر نفس الغني من الشح، وتطهّر المال من التعلّق بالدنيا، وتزيد البركة في الرزق؛ فهي عبادة قلبية ومالية في آن واحد.\n' +
        '\n' +
        '\n' +
        'تحقق الزكاة التكافل الاجتماعي؛ فبها تُسدُّ حاجة الفقراء والمحتاجين، وتُقلّل الفجوة بين طبقات المجتمع، وتُسهم في محاربة الفقر والبطالة.'
    },
    {
      id: 'what-is-nisab',
      title: 'ما هو النصاب؟',
      content: 'النصاب في الزكاة هو الحد الأدنى من المال أو الأموال التي إذا بلغتها وحال عليها الحول (سنة قمرية كاملة)، وجب إخراج الزكاة منها. يختلف النصاب حسب نوع المال، مثل 85 جرامًا من الذهب الخالص أو ما يعادله للنقود والتجارة، و595 جرامًا من الفضة.\n' +
        '\n' +
        '\n' +
        'نصاب الذهب والفضة والنقود\n' +
        'الذهب: 20 مثقالًا (85 جرامًا خالصًا عيار 24)، والزكاة 2.5% إذا مر الحول.\n' +
        '\n' +
        '\n' +
        'الفضة: 200 درهم (595 جرامًا)، والزكاة 2.5% بعد الحول.\n' +
        '\n' +
        '\n' +
        'النقود وعروض التجارة: ما يعادل قيمة 85 جرام ذهب أو 595 جرام فضة، مع طرح الديون والحاجات الأساسية.'
        +' ##شروط بلوغ النصاب\n'
        +'يجب أن يكون المال حلالًا، فائضًا عن الحاجات الأساسية، وملكًا تامًا.\n'
        +'يُحسب النصاب بالقيمة السوقية في يوم الزكاة، ويجمع أنواع المال المتشابهة.\n'

    },
    {
      id: 'what-is-hawl',
      title: 'ما هو الحول؟',
      content: 'الحول في الزكاة هو مرور سنة قمرية هجرية كاملة (354 يومًا تقريبًا) على المال بعد بلوغه النصاب، وهو شرط أساسي لوجوب الزكاة في معظم أنواع المال مثل النقود والذهب والفضة وعروض التجارة والأنعام. يبدأ الحول من تاريخ امتلاك النصاب، ويُحسب لكل دفعة جديدة حولها الخاص إذا لم تُضم إلى الأصل.[1][3][6][8]\n' +
        '\n' +
        '## معنى الحول لغة وشرعًا\n' +
        '- **لغة**: السنة أو الدوران والانقلاب، كدوران الشمس في مدارها.[3]\n' +
        '- **شرعًا**: حولان الحول، أي مضي عام هجري على النصاب دون نقصانه، لتجنب تكرار الزكاة مرات متعددة في السنة الواحدة.[2][1]\n' +
        '\n' +
        '## كيفية حساب الحول\n' +
        '- يُحسب من يوم بلوغ المال النصاب حتى اليوم نفسه في السنة التالية، مثلًا إذا بلغ في 1 محرم 1447 هـ، ينتهي في 1 محرم 1448 هـ.[5][1]\n' +
        '- إذا زاد المال خلال الحول (مثل ربح أو راتب)، يُضم إلى الأصل ويتبع حوله، أو يُحسب له حول منفصل إذا كان مستفادًا (ميراث، هبة).[6][9]\n' +
        '- يُخرج الزكاة فور تمام الحول، ولا يجوز تأخيرها إلا بعذر.[5]\n' +
        '\n' +
        '## استثناءات من شرط الحول\n' +
        '- لا يشترط في زكاة الزروع والثمار (تُخرج عند الحصاد)، ولا في الغنائم والركاز.[4][10]\n' +
        '- زكاة الفطر تُخرج في رمضان دون حول.[6]\n' +
        '\n'
    },
    {
      id: 'what-assets-are-zakatable',
      title: 'ما هي الأصول التي تجب فيها الزكاة؟',
      content: 'الأصول التي تجب فيها الزكاة هي أربعة أنواع رئيسية حددها الشرع الإسلامي: النقود (الذهب والفضة والعملات الورقية)، عروض التجارة، الزروع والثمار الخارجة من الأرض، وبهيمة الأنعام السائمة. تجب الزكاة فيها بشرط بلوغ النصاب ومرور الحول (عام هجري) إلا في الزروع والثمار حيث تُخرج عند الحصاد.[1][2][4][7]\n' +
        '\n' +
        '## الأصول للأفراد\n' +
        '- **النقود**: الذهب (85 جرامًا)، الفضة (595 جرامًا)، والعملات ما عادلت قيمتها، مع زكاة 2.5%.[5][8]\n' +
        '- **عروض التجارة**: البضائع والعقارات والأسهم المعدة للبيع، تُقيَّم بثمنها السوقي.[7][1]\n' +
        '- **الزروع والثمار**: خمسة أوسق (653 كجم تقريبًا) من الأقوات المدخرة مثل القمح والأرز، بنسبة 5-10%.[2][3]\n' +
        '- **الأنعام**: الإبل، البقر، الغنم السائمة بعد نصابها الخاص.[8][9]\n' +
        '\n' +
        '## الأصول للشركات\n' +
        '- تجب الزكاة في **رأس المال والأرباح** إذا بلغ النصاب ومر الحول، بنسبة 2.5% من القيمة السوقية للأصول التجارية (مخزون، نقود، مدينون).[1][7]\n' +
        '- تشمل الأسهم إذا كانت للتجارة (لا للاستثمار الدائم)، وتُحسب قيمة الشركة بعد طرح الديون والمصروفات.[2]\n' +
        '- لا تجب في الأصول الثابتة مثل المباني والآلات المستخدمة في الإنتاج، إلا إذا كانت للبيع.[4]\n' +
        '\n' +
        '## ما لا تجب فيه الزكاة\n' +
        '- الحاجات الأساسية: المنزل للسكن، السيارة للاستعمال، الفرش، والأراضي غير التجارية.[4][5]\n' +
        '- الحلي المباح (اختلاف)، الخضروات، والجواهر غير التجارية.[6][8]\n'}

  ]);

  activeSectionId = signal<string>(this.guideSections()[0].id);

  activeSection = computed(() => {
    return this.guideSections().find(s => s.id === this.activeSectionId()) ?? null;
  });

  selectSection(id: string) {
    this.activeSectionId.set(id);
    const element = document.getElementById('guide-content-top');
    if (element) {
      element.scrollIntoView({ behavior: 'smooth' });
    }
  }
}
